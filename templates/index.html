<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOAMMO Narrative Engine</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/themes.css">
    <link rel="stylesheet" href="/static/css/glassmorphism.css">
    <link rel="stylesheet" href="/static/css/animations.css">
    <link rel="stylesheet" href="/static/css/main.css">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Header Image -->
    <div class="header-image-container">
        <img src="/static/header-landscape.png" alt="DOAMMO Universe" class="header-image">
    </div>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-logo">DOAMMO</div>
        <div class="top-bar-icons">
            <i data-lucide="bell" class="top-bar-icon"></i>
            <i data-lucide="user" class="top-bar-icon"></i>
            <i data-lucide="settings" class="top-bar-icon" id="settingsIcon"></i>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Story Panel (Left) -->
        <div class="story-panel">
            <div class="panel-container glass-panel">
                <div class="chat-container" id="chatContainer">
                    <!-- Welcome message -->
                    <div class="message ai">
                        <div class="message-content">
                            Welcome to the DOAMMO Narrative Engine! I'm your AI narrator, powered by your universe's lore.
                            Type a scenario or action, and I'll generate an immersive narrative response using your world's knowledge base.
                            <br><br>
                            Try something like: "I explore the ancient ruins" or "Lyssia and I discover something strange"
                        </div>
                    </div>
                </div>

                <!-- Input Container -->
                <div class="input-container glass-input">
                    <input
                        type="text"
                        id="userInput"
                        placeholder="Type your scenario or action..."
                        onkeypress="if(event.key === 'Enter') sendMessage()"
                    >
                    <button id="sendBtn" onclick="sendMessage()">
                        <i data-lucide="send" style="width: 16px; height: 16px;"></i>
                        Send
                    </button>
                </div>
            </div>
        </div>

        <!-- Drag Handle -->
        <div class="drag-handle" id="dragHandle"></div>

        <!-- Director Panel (Right) -->
        <div class="director-panel" id="directorPanel">
            <button class="collapse-btn" id="collapseBtn">
                <i data-lucide="chevron-left" style="width: 16px; height: 16px;"></i>
            </button>

            <div class="director-content">
                <div class="panel-container glass-panel">
                    <!-- Tab Navigation -->
                    <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="story-wiki">Story Wiki</button>
                    <button class="tab-btn" data-tab="state">State</button>
                    <button class="tab-btn" data-tab="controls">Controls</button>
                </div>

                <!-- Story Wiki Tab -->
                <div class="tab-content active" id="story-wiki">
                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="book-open" style="width: 18px; height: 18px;"></i>
                            Story Wiki
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            No Story Wiki pages yet
                            <br><br>
                            <strong>Story Wiki will track:</strong>
                            <ul style="margin-left: 20px; margin-top: 8px;">
                                <li>Character changes specific to your story</li>
                                <li>Divergences from canon lore</li>
                                <li>Session-specific locations and items</li>
                            </ul>
                            <br>
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>
                </div>

                <!-- State Tab -->
                <div class="tab-content" id="state">
                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="bar-chart" style="width: 18px; height: 18px;"></i>
                            Character States
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>

                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="link" style="width: 18px; height: 18px;"></i>
                            Relationships
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>

                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="target" style="width: 18px; height: 18px;"></i>
                            Quest Flags
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>
                </div>

                <!-- Controls Tab -->
                <div class="tab-content" id="controls">
                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="rotate-ccw" style="width: 18px; height: 18px;"></i>
                            Undo Last Turn
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>

                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="edit" style="width: 18px; height: 18px;"></i>
                            Edit Messages
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>

                    <div class="content-card grayed">
                        <div class="card-header locked">
                            <i data-lucide="download" style="width: 18px; height: 18px;"></i>
                            Export Story
                            <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                        </div>
                        <div class="card-body">
                            <em>Coming in Phase 2</em>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="settings-modal">
            <div class="modal-header">
                <div class="modal-title">Settings</div>
                <i data-lucide="x" class="modal-close" id="closeModal"></i>
            </div>

            <!-- Agents Section -->
            <div class="accordion-section expanded">
                <div class="accordion-header" data-accordion="agents">
                    Agents
                    <i data-lucide="chevron-down" class="accordion-chevron"></i>
                </div>
                <div class="accordion-content">
                    <div class="checkbox-item">
                        <div class="checkbox active">
                            <i data-lucide="check"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">Lore Keeper Agent</div>
                            <div class="checkbox-desc">Active - retrieves lore from vault</div>
                        </div>
                    </div>

                    <div class="checkbox-item">
                        <div class="checkbox active">
                            <i data-lucide="check"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">Narrator Agent</div>
                            <div class="checkbox-desc">Active - generates story narratives</div>
                        </div>
                    </div>

                    <div class="checkbox-item">
                        <div class="checkbox active">
                            <i data-lucide="check"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">Quality Agent</div>
                            <div class="checkbox-desc">Active - checks narrative consistency</div>
                        </div>
                    </div>

                    <div class="checkbox-item disabled">
                        <div class="checkbox disabled">
                            <i data-lucide="lock" style="width: 12px; height: 12px; color: var(--text-disabled);"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">Continuity Agent</div>
                            <div class="checkbox-desc">ðŸ”’ Coming in Phase 2 - Tracks unresolved plot threads</div>
                        </div>
                    </div>

                    <div class="checkbox-item disabled">
                        <div class="checkbox disabled">
                            <i data-lucide="lock" style="width: 12px; height: 12px; color: var(--text-disabled);"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">Drama/Pacing Agent</div>
                            <div class="checkbox-desc">ðŸ”’ Coming in Phase 2 - Balances tension and calm</div>
                        </div>
                    </div>

                    <div class="checkbox-item disabled">
                        <div class="checkbox disabled">
                            <i data-lucide="lock" style="width: 12px; height: 12px; color: var(--text-disabled);"></i>
                        </div>
                        <div class="checkbox-label">
                            <div class="checkbox-title">State Updater Agent</div>
                            <div class="checkbox-desc">ðŸ”’ Coming in Phase 2 - Extracts state changes from narratives</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Display Section -->
            <div class="accordion-section expanded">
                <div class="accordion-header" data-accordion="display">
                    Display
                    <i data-lucide="chevron-down" class="accordion-chevron"></i>
                </div>
                <div class="accordion-content">
                    <div class="setting-item">
                        <div class="setting-label">Theme</div>
                        <div class="theme-switcher">
                            <button class="theme-btn active" data-theme="doammo">DOAMMO</button>
                            <button class="theme-btn" data-theme="dark">Dark</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Section (locked) -->
            <div class="accordion-section">
                <div class="accordion-header locked" data-accordion="advanced">
                    Advanced
                    <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                </div>
            </div>

            <!-- Writer Mode Section (locked) -->
            <div class="accordion-section">
                <div class="accordion-header locked" data-accordion="writer">
                    Writer Mode
                    <i data-lucide="lock" style="width: 14px; height: 14px; margin-left: auto;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/theme.js"></script>
    <script src="/static/js/panels.js"></script>
    <script src="/static/js/settings.js"></script>
    <script src="/static/js/chat.js"></script>
    <script src="/static/js/app.js"></script>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
